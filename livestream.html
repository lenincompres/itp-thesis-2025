<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NYU ITP / IMA Thesis Live Stream</title>
    <link href="https://vjs.zencdn.net/8.20.0/video-js.css" rel="stylesheet" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-54YGZP2VQT"></script>
    <script defer src="https://www.itp.nyu.edu/branding/header/contentScript.js"></script>
    <link rel="stylesheet" href="https://www.itp.nyu.edu/branding/header/style.css">    

    <script
      type="text/javascript"
      src="https://status.itpima.com/socket.io/socket.io.js"
    ></script>
    <script>
      var socket = io.connect("https://status.itpima.com/");

      socket.on("connect", function () {
        console.log("Connected " + socket.id);
      });

      socket.on("update", function (data) {
        console.log("update: " + data);
        setTimeout(function () {
          document.getElementById("t1").innerHTML = data;
        }, 30000);
      });
    </script>
    <style>
      :root {
        /* Pastel Palette */
        --primary: #a0c4ff; /* Soft Blue */
        --primary-light: #eaf2ff; /* Lighter Blue */
        --secondary: #f1f1f1; /* Light Gray */
        --text: #000000; /* Dark Gray -> Black for High Contrast */
        --text-light: #333333; /* Medium Gray -> Darker Gray for High Contrast */
        --break: #ffadad; /* Soft Red */
        --break-light: #ffe5e5; /* Lighter Red */
        --border: #eaeaea; /* Very Light Gray */
        --white: #ffffff;
        --bg-body: #fdfdff; /* Very Light Gray/Off-white */
        --banner-text: #000000; /* Muted brown -> Black for High Contrast */
        --border-radius-large: 20px; /* Super round corners */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Nunito", "Inter", -apple-system, BlinkMacSystemFont,
          sans-serif;
        color: var(--text);
        background: linear-gradient(
          135deg,
          #a0c4ff,
          /* Soft Blue */ #bdecb6,
          /* Light Green */ #fffdbb,
          /* Light Yellow */ #ffdac1,
          /* Peach */ #ffadad,
          /* Soft Red */ #d7b0ff /* Light Purple */
        );
        background-size: 600% 600%;
        animation: gradientBG 15s ease infinite;
        line-height: 1.5;
        padding: 0;
      }

      .site-banner {
        background-color: var(--white);
        color: var(--banner-text);
        padding: 1.5rem 1rem;
        text-align: center;
        font-size: 2.2rem;
        font-weight: 700;
        letter-spacing: 2px;
        font-family: "Nunito", sans-serif;
        border-bottom: 1px solid var(--border);
      }

      .site-nav {
        background-color: var(--white);
        padding: 0.75rem 2rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: flex-start;
        gap: 2rem;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .site-nav a {
        color: var(--text);
        text-decoration: none;
        font-weight: 600;
        font-size: 1rem;
        transition: color 0.2s ease;
      }

      .site-nav a:hover {
        color: var(--text);
      }

      .container {
        max-width: 95%;
        min-height: 80vh;
        margin: 2rem auto 0;
        padding: 2rem;
        background-color: var(--white);
        border-radius: var(--border-radius-large);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

        display: flex;
        flex-direction: column;
      }

      .livestreamAndChat {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: stretch;
        gap: 1rem;
        flex-grow: 1;
      }

      .video-wrapper {
        position: relative;
        flex-grow: 1;
        overflow: hidden;
      }

      #my-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 90%;
      }

      #chatContainerAndControls {
        height: 100%;
        display: flex;
        flex-direction: row;
        gap: 1rem;
      }

      #toggleChatButton {
        writing-mode: vertical-lr;
        text-orientation: sideways;
        height:100%;
        background-color: var(--primary);
        color: var(--white);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: background-color 0.2s ease;
      }
      #chatContainer {
        min-width: 400px;
        min-height: 300px;
      }

      #chatFrame {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 8px;
      }

      .hidden {
        display: none;
        transition: all 0.5s ease;
      }

      #t1 {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        color: var(--text);
        text-align: center;
        display: inline-block;
        align-self: flex-end;
      }

      #t1-wrapper {
        display: flex;
        height: 100%;
      }

      h1 {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        color: var(--text);
        text-align: center;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <nav class="site-nav">
      <a href="/">Home</a>
      <a href="http://itp.nyu.edu/thesis/archive" target="_blank"
        >Thesis Archive</a
      >
    </nav>

    <div class="container">
      <h1>NYU ITP Thesis / IMA Capstone Live Stream</h1>
      <!-- Content for livestream page will go here -->
      <div class="livestreamAndChat">
        <div class="video-wrapper">
          <video
            id="my-video"
            class="video-js"
            controls
            autoplay="true"
            preload="auto"
            poster="banner-16x9.jpg"
            webkit-playsinline
            playsinline
            data-setup="{}"
          >
            <source
              src="https://ddap97eg6og3o.cloudfront.net/live-http/thesis/playlist.m3u8"
              type="application/x-mpegURL"
            />

            <!-- <source src="https://ddap97eg6og3o.cloudfront.net/livecaching/stream/playlist.m3u8" type="application/x-mpegURL" /> -->
            <!-- <source src="https://ddap97eg6og3o.cloudfront.net/live/stream/playlist.m3u8" type="application/x-mpegURL" /> -->
            <!-- <source src="https://wowza.itp.io/livecaching/stream/playlist.m3u8" type="application/x-mpegURL" /> -->
            <p class="vjs-no-js">
              To view this video please enable JavaScript, and consider
              upgrading to a web browser that
              <a href="https://videojs.com/html5-video-support/" target="_blank"
                >supports HTML5 video</a
              >
            </p>
          </video>
          <div id="t1-wrapper"><div id="t1"></div></div>
        </div>
        <div id="chatContainerAndControls">
          
          <div id="chatContainer">
            <iframe
              id="chatFrame"
              src="https://rocketchat.itp.io/channel/general?layout=embedded"
            ></iframe>
          </div>
          <button id="toggleChatButton">Hide Chat</button>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Livestream page loaded");
      });

      const toggleChatButton = document.getElementById("toggleChatButton");
      const chatContainer = document.getElementById("chatContainer");
      toggleChatButton.addEventListener("click", function () {
        chatContainer.classList.toggle("hidden");
        if (chatContainer.classList.contains("hidden")) {
          toggleChatButton.textContent = "Show Chat";
        } else {
          toggleChatButton.textContent = "Hide Chat";
        }
      });
    </script>

    <script src="https://vjs.zencdn.net/8.20.0/video.min.js"></script>
  </body>
</html>